{"version":3,"sources":["login.js","player.js","useAuth.js","App.js","index.js"],"names":["Login","className","href","spotifyApi","SpotifyWebApi","clientId","Player","accessToken","code","useState","setAccessToken","setRefreshToken","setExpiresIn","useEffect","axios","post","then","res","data","refreshToken","expiresIn","window","history","pushState","catch","error","console","log","UseAuth","playing","setPlaying","name","setName","album","setAlbum","artist","setArtist","image","setImage","progress","setProgress","trackLen","setTrackLen","getPlaybackInfo","intervalId","setInterval","updateProgress","clearInterval","a","getMyCurrentPlaybackState","body","is_playing","item","artists","images","url","progress_ms","duration_ms","alert","err","card","useRef","progressBar","current","style","width","class","onMouseEnter","transition","onMouseLeave","transform","onMouseMove","e","xAxis","innerWidth","pageX","yAxis","innerHeight","pageY","mouseMove","ref","src","cursor","fontSize","marginRight","icon","faStepBackward","onClick","skipToPrevious","faPauseCircle","faPlayCircle","pause","play","faStepForward","skipToNext","backgroundImage","URLSearchParams","location","search","get","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a75794a3.chunk.js","sourcesContent":["import React from \"react\"\n\nconst AUTH_URL = \n'https://accounts.spotify.com/authorize?\\\nclient_id=a0bf3438b3ad4c858409f29e0bd154d8\\\n&response_type=code\\\n&redirect_uri=https://ankityande.github.io/ReactSpotifyPlayer/\\\n&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state'\n\nexport default function Login() {\n  return (\n      <a className=\"btn\" href={AUTH_URL}>\n        Login With Spotify\n      </a>\n  )\n}","import React, { useEffect, useState, useRef } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPauseCircle, faPlayCircle, faStepForward, faStepBackward } from \"@fortawesome/free-solid-svg-icons\";\nimport UseAuth from \"./useAuth\"\nimport SpotifyWebApi from \"spotify-web-api-node\"\nimport \"./style.css\"\n\nconst spotifyApi = new SpotifyWebApi({\n  clientId: \"a0bf3438b3ad4c858409f29e0bd154d8\",\n})\n\nexport default function Player({ code }) {\n\n  const accessToken = UseAuth(code);\n\n  const [playing, setPlaying] = useState()\n  const [name, setName] = useState()\n  const [album, setAlbum] = useState()\n  const [artist, setArtist] = useState()\n  const [image, setImage] = useState()\n  const [progress, setProgress] = useState()\n  const [trackLen, setTrackLen] = useState()\n\n  useEffect(() => {\n    if (!accessToken) return\n    spotifyApi.setAccessToken(accessToken)\n    getPlaybackInfo()\n  }, [accessToken])\n\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      getPlaybackInfo()\n      updateProgress()\n    }, 1000)\n\n    return () => clearInterval(intervalId);\n  })\n\n  const getPlaybackInfo = async () => {\n    if (accessToken) {\n      spotifyApi.getMyCurrentPlaybackState()\n        .then(function (data) {\n          if(data && data.body){\n            setPlaying(data.body.is_playing)\n            setName(data.body.item.name);\n            setAlbum(data.body.item.album.name);\n            setArtist(data.body.item.artists[0].name);\n            setImage(data.body.item.album.images[0].url);\n            if(data.body && data.body.progress_ms) setProgress(data.body.progress_ms)\n            setTrackLen(data.body.item.duration_ms)\n          }else{\n            alert('Make sure you are playing something in Spotify')\n          }\n        }, function (err) {\n          console.log('Something went wrong getting playback info', err);\n        });\n    }\n  }\n\n  const togglePlay = () => {\n    if (playing) {\n      spotifyApi.pause()\n        .then(function () {\n          console.log('Playback paused');\n        }, function (err) {\n          //if the user making the request is non-premium, a 403 FORBIDDEN response code will be returned\n          alert('You need a premium account for that', err);\n        });\n    } else {\n      spotifyApi.play()\n        .then(function () {\n          console.log('Playback started');\n        }, function (err) {\n          //if the user making the request is non-premium, a 403 FORBIDDEN response code will be returned\n          alert('You need a premium account for that', err);\n        });\n    }\n    // setPlaying(!playing)\n  }\n\n  const next = () => {\n    // Skip User’s Playback To Next Track\n    spotifyApi.skipToNext()\n      .then(function () {\n        console.log('Skip to next');\n      }, function (err) {\n        //if the user making the request is non-premium, a 403 FORBIDDEN response code will be returned\n        alert('You need a premium account for that', err);\n      });\n  }\n\n  const prev = () => {\n    // Skip User’s Playback To Previous Track \n    spotifyApi.skipToPrevious()\n      .then(function () {\n        console.log('Skip to previous');\n      }, function (err) {\n        //if the user making the request is non-premium, a 403 FORBIDDEN response code will be returned\n        alert('You need a premium account for that', err);\n      });\n  }\n\n\n  const card = useRef();\n  const mouseMove = (e) => {\n    let xAxis = (window.innerWidth / 2 - e.pageX) / 20;\n    let yAxis = (window.innerHeight / 2 - e.pageY) / 20;\n    card.current.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;\n  }\n  const mouseEnter = () => {\n    card.current.style.transition = \"none\";\n  }\n  const mouseLeave = () => {\n    card.current.style.transition = \"all 0.5s ease\"\n    card.current.style.transform = \"rotateY(0deg) rotateX(0deg)\";\n  };\n\n  const progressBar = useRef();\n  const updateProgress = async () => {\n    if (progress && trackLen) {\n      progressBar.current.style.width = `${progress * 100 / trackLen}%`;\n    }\n  }\n\n  return (\n    <body>\n\n      <div class=\"container\"\n        onMouseEnter={() => mouseEnter()}\n        onMouseLeave={() => mouseLeave()}\n        onMouseMove={(e) => mouseMove(e)}\n      >\n        <div class=\"card\" ref={card}>\n\n          <div class=\"now-playing__img\">\n            <img class=\"playing_img\" src={image} />\n          </div>\n\n          <div class=\"now-playing__info\">\n            <div class=\"now-playing__name\">{name}</div>\n            <div class=\"now-playing__album\">{album}</div>\n            <div class=\"now-playing__artist\">{artist}</div>\n\n            <div class=\"progress\">\n              <div class=\"progress__bar\" ref={progressBar}></div>\n            </div>\n\n            <div class=\"playback\">\n              <FontAwesomeIcon style={{ cursor: \"pointer\", fontSize: \"2rem\", marginRight: 10 }} icon={faStepBackward} onClick={prev} />\n              <FontAwesomeIcon style={{ cursor: \"pointer\", fontSize: \"3rem\", marginRight: 10 }} icon={playing ? faPauseCircle : faPlayCircle} onClick={togglePlay} />\n              <FontAwesomeIcon style={{ cursor: \"pointer\", fontSize: \"2rem\", marginRight: 10 }} icon={faStepForward} onClick={next} />\n            </div>\n\n          </div>\n\n        </div>\n\n      </div>\n\n      <div class=\"background\" style={{ backgroundImage: `url(${image})` }}></div>\n\n    </body>\n  )\n}\n","import { useState, useEffect } from \"react\"\nimport axios from \"axios\"\n\nexport default function useAuth(code) {\n  const [accessToken, setAccessToken] = useState()\n  const [refreshToken, setRefreshToken] = useState()\n  const [expiresIn, setExpiresIn] = useState()\n\n  let baseUrl = \"https://interactive-spotify-player.herokuapp.com/\"\n\n  useEffect(() => {\n    axios\n      .post(baseUrl, {\n        code,\n      })\n      .then(res => {\n        // console.log(res.data)\n        setAccessToken(res.data.accessToken)\n        setRefreshToken(res.data.refreshToken)\n        setExpiresIn(res.data.expiresIn)\n        window.history.pushState({}, null, \"/player\")\n      })\n      .catch((error) => {\n        console.log(error)\n        // window.location = \"/\"\n      })\n  }, [code])\n\n  return accessToken\n}","import Login from \"./login\"\nimport Player from \"./player\"\n\nconst code = new URLSearchParams(window.location.search).get(\"code\")\n\nfunction App() {\n  return code ? <Player code={code} /> : <Login />\n}\n\nexport default App","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)"],"sourceRoot":""}