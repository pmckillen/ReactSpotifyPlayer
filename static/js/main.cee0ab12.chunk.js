(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{77:function(e,t){},94:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(30),o=n.n(r),i=n(1);function s(){return Object(i.jsx)("a",{className:"btn",href:"https://accounts.spotify.com/authorize?client_id=a0bf3438b3ad4c858409f29e0bd154d8&response_type=code&redirect_uri=https://ankityande.github.io/ReactSpotifyPlayer/&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state",children:"Login With Spotify"})}var u=n(5),l=n.n(u),d=n(15),b=n(4),f=n(9),j=n(7),p=n(31),y=n.n(p);var h=n(32),g=n.n(h),m=(n(94),new g.a({clientId:"a0bf3438b3ad4c858409f29e0bd154d8"}));function O(e){var t=function(e){var t=Object(c.useState)(),n=Object(b.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(),i=Object(b.a)(o,2),s=(i[0],i[1]),u=Object(c.useState)(),l=Object(b.a)(u,2),d=(l[0],l[1]);return Object(c.useEffect)((function(){y.a.post("https://spotify-player-api.herokuapp.com/login",{code:e}).then((function(e){r(e.data.accessToken),s(e.data.refreshToken),d(e.data.expiresIn),window.history.pushState({},null,"/player")})).catch((function(e){console.log(e)}))}),[e]),a}(e.code),n=Object(c.useState)(),a=Object(b.a)(n,2),r=a[0],o=a[1],s=Object(c.useState)(),u=Object(b.a)(s,2),p=u[0],h=u[1],g=Object(c.useState)(),O=Object(b.a)(g,2),v=O[0],k=O[1],x=Object(c.useState)(),w=Object(b.a)(x,2),S=w[0],_=w[1],M=Object(c.useState)(),R=Object(b.a)(M,2),Y=R[0],I=R[1],P=Object(c.useState)(),E=Object(b.a)(P,2),T=E[0],z=E[1],C=Object(c.useState)(),L=Object(b.a)(C,2),X=L[0],J=L[1];Object(c.useEffect)((function(){t&&(m.setAccessToken(t),N())}),[t]),Object(c.useEffect)((function(){var e=setInterval((function(){N(),B()}),1e3);return function(){return clearInterval(e)}}));var N=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&m.getMyCurrentPlaybackState().then((function(e){e&&e.body?(o(e.body.is_playing),h(e.body.item.name),k(e.body.item.album.name),_(e.body.item.artists[0].name),I(e.body.item.album.images[0].url),e.body&&e.body.progress_ms&&z(e.body.progress_ms),J(e.body.item.duration_ms)):alert("Make sure you are playing something in Spotify")}),(function(e){console.log("Something went wrong getting playback info",e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=Object(c.useRef)(),A=Object(c.useRef)(),B=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T&&X&&(A.current.style.width="".concat(100*T/X,"%"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)("body",{children:[Object(i.jsx)("div",{class:"container",onMouseEnter:function(){W.current.style.transition="none"},onMouseLeave:function(){return W.current.style.transition="all 0.5s ease",void(W.current.style.transform="rotateY(0deg) rotateX(0deg)")},onMouseMove:function(e){return function(e){var t=(window.innerWidth/2-e.pageX)/20,n=(window.innerHeight/2-e.pageY)/20;W.current.style.transform="rotateY(".concat(t,"deg) rotateX(").concat(n,"deg)")}(e)},children:Object(i.jsxs)("div",{class:"card",ref:W,children:[Object(i.jsx)("div",{class:"now-playing__img",children:Object(i.jsx)("img",{class:"playing_img",src:Y})}),Object(i.jsxs)("div",{class:"now-playing__info",children:[Object(i.jsx)("div",{class:"now-playing__name",children:p}),Object(i.jsx)("div",{class:"now-playing__album",children:v}),Object(i.jsx)("div",{class:"now-playing__artist",children:S}),Object(i.jsx)("div",{class:"progress",children:Object(i.jsx)("div",{class:"progress__bar",ref:A})}),Object(i.jsxs)("div",{class:"playback",children:[Object(i.jsx)(f.a,{style:{cursor:"pointer",fontSize:"2rem",marginRight:10},icon:j.c,onClick:function(){m.skipToPrevious().then((function(){console.log("Skip to previous")}),(function(e){alert("You need a premium account for that",e)}))}}),Object(i.jsx)(f.a,{style:{cursor:"pointer",fontSize:"3rem",marginRight:10},icon:r?j.a:j.b,onClick:function(){r?m.pause().then((function(){console.log("Playback paused")}),(function(e){alert("You need a premium account for that",e)})):m.play().then((function(){console.log("Playback started")}),(function(e){alert("You need a premium account for that",e)}))}}),Object(i.jsx)(f.a,{style:{cursor:"pointer",fontSize:"2rem",marginRight:10},icon:j.d,onClick:function(){m.skipToNext().then((function(){console.log("Skip to next")}),(function(e){alert("You need a premium account for that",e)}))}})]})]})]})}),Object(i.jsx)("div",{class:"background",style:{backgroundImage:"url(".concat(Y,")")}})]})}var v=new URLSearchParams(window.location.search).get("code");var k=function(){return v?Object(i.jsx)(O,{code:v}):Object(i.jsx)(s,{})};o.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(k,{})}),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.cee0ab12.chunk.js.map